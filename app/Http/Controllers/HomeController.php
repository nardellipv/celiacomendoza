<?phpnamespace celiacomendoza\Http\Controllers;use celiacomendoza\Blog;use celiacomendoza\Commerce;use celiacomendoza\Http\Requests\MailCustomerRequest;use celiacomendoza\Province;use Illuminate\Support\Facades\Mail;use Illuminate\Support\Facades\Session;class HomeController extends Controller{    public function list()    {        $commerces = Commerce::with(['region', 'province'])            ->where('region_id', '!=', NULL)            ->orderBy('created_at', 'DESC')            ->paginate(8);        $ratingVote = Commerce::orderBy('votes_positive', 'DESC')            ->first();        $ratingVisit = Commerce::orderBy('visit', 'DESC')            ->first();        $posts = Blog::orderBy('created_at', 'DESC')            ->where('type', 'Blog')            ->take(3)            ->get();        $personals = Blog::orderBy('created_at', 'DESC')            ->where('type', 'Personal')            ->take(3)            ->get();        $provinces = Province::orderBy('name', 'ASC')            ->get();        $recommendeds = Commerce::with(['region', 'province'])            ->where('type', '!=', 'FREE')            ->get();        return view('web.parts._companies', compact('commerces', 'posts', 'provinces', 'personals', 'ratingVote', 'ratingVisit',            'recommendeds'));    }    public function MailClient(MailCustomerRequest $request)    {        Mail::send('web.mails.MailClient', $request->all(), function ($msj) use ($request) {            $msj->from($request->email, $request->name);            $msj->subject('Mensaje desde celiacomendoza');            $msj->to('info@celiacosmendoza.com', 'CeliacoMendoza');        });        Session::flash('message', 'Su mensaje fue enviado correctamente. Muchas gracias!!!');        return back();    }}